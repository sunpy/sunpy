language: python

python:
  - 2.7
  - 3.2
  - 3.3
env:
    - NUMPY_VERSION=1.7.0 SETUP_CMD='test' OPTIONAL_DEPS=true MATPLOTLIB_VERSION=1.1 SUDS_PKG='suds-jurko'

#matrix:
#    include:
#        - python: 2.6
#        env: NUMPY_VERSION=1.7.0 SETUP_CMD='test' OPTIONAL_DEPS=true MATPLOTLIB_VERSION=1.1 SUDS_PKG='suds'

before_install:
   # We do this to make sure we get the dependencies so pip works below
   - sudo apt-get update -qq
   - if [[ $SETUP_CMD != egg_info ]]; then sudo apt-get install -qq python-numpy cython libatlas-dev liblapack-dev gfortran; fi
   - if $OPTIONAL_DEPS; then sudo apt-get install -qq python-scipy python-matplotlib python-pandas python-pyfits; fi

# command to install dependencies
install: 
  - pip install pytest suds-jurko beautifulsoup4
  - if $OPTIONAL_DEPS; then pip install pyfits --use-mirrors; fi
  - pip install --upgrade "numpy==$NUMPY_VERSION" -q --use-mirrors
  - pip install --upgrade "matplotlib==$MATPLOTLIB_VERSION" -q --use-mirrors
  - if $OPTIONAL_DEPS; then pip install scipy --use-mirrors; fi

# command to run tests
script:
  - python setup.py test 
  - py.test sunpy/tests/

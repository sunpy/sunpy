.. _whatsnew-5.0:

************************
What's New in sunpy 5.0?
************************
The SunPy project is pleased to announce the 5.0 release of the ``sunpy`` core package.

On this page, you can read about some of the big changes in this release.

.. contents::
    :local:
    :depth: 1

``sunpy`` 5.0 also includes a large number of smaller improvements and bug fixes, which are described in the :ref:`changelog`.


Updates to minimum dependencies
===============================
The minimum required versions of several core dependencies have been updated:

- Python 3.9
- astropy 5.0.1
- numpy 1.21.0

The minimum required versions of these optional dependencies has also been updated:

- Matplotlib 3.5.0
- dask 2021.4.0
- h5netcdf 0.11.0
- pandas 1.2.0
- scikit-image 0.18.0
- scipy 1.7.0

``sunpy.database`` deprecation
==============================
The ``sunpy.database`` module is no longer actively maintained and has a number of outstanding issues.
It has now been formally deprecated, and will be removed in sunpy 6.0.
If you are using sunpy.database and would like to see a replacement, please join the discussion thread at https://community.openastronomy.org/t/deprecating-sunpy-database/495.

Deprecation of IO readers
=========================
``sunpy.io.cdf``, ``sunpy.io.file_tools`` and ``sunpy.io.jp2`` sub-modules have been deprecated, and will be removed in version 5.1.

This because they are designed for internal use only, and removing it from the public API gives the developers more flexibility to modify it without impacting users.

Simplified way to get the solar angular radius
==============================================
``sunpy.coordinates.sun.angular_radius``, which gets the angular radius of the Sun as observed from Earth at a given time, and ``sunpy.map.maputils.solar_angular_radius``, which gets the angular radius of the Sun for a given helioprojective coordinate, are both deprecated.

They have been replaced with `sunpy.coordinates.sun.solar_angular_radius`, which is more general, taking a single observer coordinate as input that can be in any coordinate frame transformable to heliographic Stonyhurst.

To replace uses of ``sunpy.coordinates.sun.angular_radius``, do::

    >>> from sunpy.coordinates.sun import solar_angular_radius, get_earth
    >>> solar_angular_radius(get_earth("2023-04-16"))
    <Angle 956.08106379 arcsec>


To replace uses of ``sunpy.map.maputils.solar_angular_radius``, do::

    >>> import astropy.units as u
    >>> from sunpy.coordinates import Helioprojective
    >>> from sunpy.coordinates.sun import solar_angular_radius
    >>>
    >>> my_coord = Helioprojective(0*u.arcsec, 0*u.arcsec, observer=get_earth("2023-04-16"))
    >>> solar_angular_radius(my_coord.observer)
    <Angle 956.08106379 arcsec>

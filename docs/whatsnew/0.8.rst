.. doctest-skip-all

.. _whatsnew-0.8:

**************************
What's New in SunPy 0.8?
**************************

Overview
========

SunPy 0.8 is a major release that adds significant new functionality since
the 0.7.x series of releases.

On this page, you can read about some of the big changes in this release:

* :ref:`whatsnew-0.8-fido`
* :ref:`whatsnew-0.8-coordinates`
* :ref:`whatsnew-0.8-timeseries`
* :ref:`whatsnew-0.8-renamed-removed`

In addition to these major changes, SunPy 0.8 includes a large number of
smaller improvements and bug fixes, which are described in the :ref:`changelog`.
By the numbers:


* ??? issues have been closed since v0.7
* ??? pull requests have been merged since v0.7
* ??? distinct people have contributed code

.. _whatsnew-0.8-fido:

New data downloading interface
==============================

???

.. _whatsnew-0.8-coordinates:

New coordinate package
======================

Spatial locations are now represented by SunPy coordinates.
Coordinates can be defined very simply::

    >>> from astropy import units as u
    >>> from astropy.coordinates import SkyCoord
    >>> from sunpy.coordinates import frames
    >>> a = SkyCoord(200*u.arcsec, 300*u.arcsec, frame=frames.Helioprojective)
    >>> a
    <SkyCoord (Helioprojective: obstime=None, rsun=695508.0 km, observer=earth): (Tx, Ty) in arcsec
    ( 200.,  300.)>
    >>> b = SkyCoord(-20*u.degree, -56*u.degree, frame=frames.HeliographicStonyhurst)
    >>> b
    <SkyCoord (HeliographicStonyhurst: obstime=None): (lon, lat, radius) in (deg, deg, km)
    (-20., -56.,  695508.)>


The coordinate "a" is in the helioprojective coordinate system, and the coordinate "b"
is in the heliographic Stonyhurst system.

Maps can also be used to define coordinate frames::

    >>> import sunpy.map
    >>> import sunpy.data.sample
    >>> aia_map = sunpy.map.Map(sunpy.data.sample.AIA_171_IMAGE)
    >>> c = SkyCoord(-45*u.arcsec, 600*u.arcsec, frame=aia_map.coordinate_frame)
    >>> c
    <SkyCoord (Helioprojective: obstime=2011-06-07 06:33:02.770000, rsun=696000000.0 m, observer=<HeliographicStonyhurst Coordinate (obstime=None): (lon, lat, radius) in (deg, deg, m)
    ( 0.,  0.048591,   1.51846026e+11)>): (Tx, Ty) in arcsec
    (-45.,  600.)>

The coordinate "c" is now defined with respect to the coordinate frame derived from the map.
The observer attribute::

    >>> c.observer
    <HeliographicStonyhurst Coordinate (obstime=None): (lon, lat, radius) in (deg, deg, m)
    ( 0.,  0.048591,   1.51846026e+11)>

defines the location from which the coordinate was observed.


Transformation between solar physics coordinate systems
-------------------------------------------------------

Transformation between solar physics coordinate frames is simple::

    >>> c.transform_to(frames.HeliographicStonyhurst)
    <SkyCoord (HeliographicStonyhurst: obstime=2011-06-07 06:33:02.770000): (lon, lat, radius) in (deg, deg, km)
    (-3.51257477,  39.27459767,  696000.00000088)>

Transformation to astropy coordinate systems
--------------------------------------------

Solar physics coordinates can also be transformed into astrophysical coordinates.
For example, to convert to the International Celestial Reference System (ICRS)::

    >>> c.transform_to('icrs')
    <SkyCoord (ICRS): (ra, dec, distance) in (deg, deg, km)
    ( 240.91724178, -6.72107631,  369983.29218687)>

Specification of observer at any major solar system body
--------------------------------------------------------

Major solar system bodies can be used to specify observer locations in SkyCoord::

    >>> from sunpy.coordinates import get_body_heliographic_stonyhurst
    >>> obstime = '2011-06-07 06:33:02'
    >>> observer = get_body_heliographic_stonyhurst('Mars', obstime)
    >>> d = SkyCoord(-45*u.arcsec, 600*u.arcsec, observer=observer, obstime=obstime, frame=frames.Helioprojective)
    >>> d
    <SkyCoord (Helioprojective: obstime=2011-06-07 06:33:02, rsun=695508.0 km, observer=<HeliographicStonyhurst Coordinate (obstime=2011-06-07 06:33:02): (lon, lat, radius) in (deg, deg, AU)
    ( 135.78519602,  4.47598707,  1.43448427)>): (Tx, Ty) in arcsec
    (-45.,  600.)>


.. _whatsnew-0.8-timeseries:

New timeseries data object
==========================

???

.. _whatsnew-0.8-renamed-removed:

Renamed/removed functionality
=============================

Several sub-packages have been moved or removed, and these are described in the
following sections.

???
---


Full change log
===============

To see a detailed list of all changes in version v0.8, including changes in
API, please see the :ref:`changelog`.
